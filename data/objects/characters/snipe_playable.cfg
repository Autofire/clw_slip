# Ember; main player character

{

#DEFINES#
id: "snipe_playable",
prototype: ["player_controlled"],
editor_info: { category: "Characters" },
solid_dimensions: ["player","common","boss"],
collide_dimensions: ["common","enemy","boss"],
vehicle: false,
has_feet: false,
accel_y: 0,
accel_x: 0,
hitpoints: 30,
mass: 5,
is_human: true,
zorder: "@include data/zorder.cfg:player",

properties: {
	turn_speed: "120",
	cruise_speed: "200",
	
	upper_bound: "level.dimensions[1]",	
	lower_bound: "level.dimensions[3]",	
	
	left_bound: "level.dimensions[0]",	
	right_bound: "level.dimensions[2]",
	
	keep_from_leaving_y_range: "[
			if(me.midpoint_y < upper_bound,
				set(me.midpoint_y, upper_bound)),
			if(me.midpoint_y > lower_bound,
				set(me.midpoint_y, lower_bound))
			]",
	
	keep_from_leaving_x_range: "
			if(me.midpoint_x > right_bound,
				set(me.midpoint_x, left_bound))
			",
},

#ANIMATION HANDLES#
on_create: "[animation('stand'), set(facing, 1)]",
on_end_stand_anim: "animation('stand')",

on_process: "[
			set(velocity_x, velocity_x/2),
			set(velocity_y, velocity_y/2),
	//		set(accel_x, accel_x/1.5),
			set(accel_y, accel_y/1.3),
			
			//if(ctrl_up, add(velocity_y, -turn_speed)),
			//if(ctrl_down, add(velocity_y, turn_speed)),
			
			add(accel_y, if(
				ctrl_up and ctrl_down, 0,
				ctrl_up, -turn_speed,
				ctrl_down, turn_speed,
				0) ),
			
			add(velocity_x, cruise_speed),
			
			keep_from_leaving_y_range,
			keep_from_leaving_x_range
		]",

#ANIMATIONS#
animation: [
	{
		id: "stand",
		body_area: "all",
		image: "characters/snipe.png",
		rect: [3, 3, 34, 34],
		solid_area: [1,1,18,29],
		frames: 1,
		frames_per_row: 8,
		pad: 3,
		duration: 6,
	},
],

}
